:active_versions:
  :object_class: Array
  :allowed_min: 1
  :allowed: 
    - 1

:apply_config:
  :object_class: Hash
  :required:
    :renderer_version: Fixnum
    :assets: :assets
    :layout: :file
    :modals: :files
    :page_templates: :files
    :ruby_eval: :code_eval_hash
    :page_configs: :page_configs
  :allowed:
    :additional_templates: :full_file_paths
    :include: :include_hash
    :shared_configs: :shared_configs

:assets:
  :object_class: Hash
  :required:
    :scripts: :scripts_hash
    :styles: :styles

:boolean:
  :object_classes:
    - TrueClass
    - FalseClass

:button:
  :object_class: Hash
  :required:
    :text: :text_section
  :allowed:
    :disable_icons: :boolean
    :attrs: Hash

:code_eval_hash:
  :object_class: Hash
  :allowed:
    :days: String
    :income_types: String
    :months: String
    :loan_purposes: String
    :self_credit_scores: String
    :states: String
    :years: String
    :years_last_50: String
    :pay_frequency: String
    :upload_types: String
    :property_types: String
    :occupancy_types: String
    :same_address_responses: String
    :ethnicities: String
    :genders: String
  :language: :ruby

:component_configs:
  :object_class: Hash
  :required_from_sister:
    -
      :sister_key: :components
      :req_key: '%{sister_val}'
      :req_val: '%{sister_val}_config'

# TODO finish individual component configs: progress? sidebar
:components:
  :object_class: Array
  :allowed:
    - footer
    - form
    - header
    - progress
    - sidebar
    - text_body

:config: # root config
  :object_class: Hash
  :required:
    :active_versions: :active_versions
    :apply: :apply_config

:consents_sections:
  :object_class: Array
  :value_types:
    - :consent_section

:consent_section:
  :object_class: Hash
  :required:
    :section_type: :consent_section_type
    :consents: :consents
  :allowed:
    :hide_state_consents: :boolean
    :hide_conditions: :hide_conditions

:consent_section_type:
  :object_class: String
  :allowed:
    - checkbox
    - li
    - text

:consents:
  :object_class: Array
  :value_types:
    - :consent

:consent:
  :object_class: Hash
  :required: 
    :field_options: Hash # TODO field_options


:file:
  :object_class: String
  :validations:
    -
      :type: :regexp
      :parameters: '/^[\w\d_-]*(\.[\w]{3,4})*$/'

:files:
  :object_class: Array
  :value_types:
    - :file

:fixnums:
  :object_class: Array
  :value_types:
    - Fixnum

:footer_config:
  :object_class: Hash
  :required:
    :elements: :footer_elements

:footer_element:
  :object_class: Hash
  :required:
    :partial: :file
  :required_when:
    :partial:
      :legal_notices:
        :sections: :legal_sections
  :allowed:
    :sections: Array # TODO: :footer_element_sections

:footer_elements:
  :object_class: Array
  :value_types:
    - :footer_element

:form_config:
  :object_class: Hash
  :required:
    :sections: :form_sections
  :allowed:
    :use_counters: :boolean
    :attrs: Hash

:form_sections:
  :object_class: Array
  :value_types:
    - :form_section

# TODO finish form_section
:form_section:
  :object_class: Hash
  :required:
    :elements: Array # TODO: :form_elements
  :allowed:
    :attrs: Hash
    :label: :text_section
    :non_step: :boolean
    :loan_result: :boolean
    :caption: :text_section
    :step_disabled_condition: String

:full_file_path:
  :object_class: String
  :validations:
    -
      :type: :regexp
      :parameters: '/^[\/\\]{1,2}[-\w\d_\/\\]*(\.[\w]{3,4})*$/'

:full_file_paths:
  :object_class: Array
  :value_types:
    - :full_file_path

:header_config:
  :object_class: Hash
  :allowed_min: 1
  :allowed:
    :partial: :file
    :sections: :header_sections

:header_section:
  :object_class: Hash
  :required:
    :elements: :header_section_elements
  :allowed:
    :attrs: Hash

:header_sections:
  :object_class: Array
  :value_types:
    - :header_section

:header_section_element:
  :object_class: Hash
  :required:
    :element_type: :file
    :text: :text_section
  :allowed:
    :attrs: Hash

:header_section_elements:
  :object_class: Array
  :value_types:
    - :header_section_element

:hide_conditions:
  :object_class: Array
  :value_types:
    - :boolean
    - String

:include_hash:
  :object_class: Hash
  :allowed:
    :threat_matrix: :boolean

:icon_string:
  :object_class: String
  :validations:
    -
      :type: :regexp
      :parameters: /^#[\w-]*$/

:legal_notices:
  :object_class: Hash
  :required:
    :sections: :legal_sections

:legal_sections:
  :object_class: Array
  :value_types:
    - :legal_section

:legal_section:
  :object_class: Hash
  :required:
    :partial: :file
  :allowed:
    :details: 
  :required_when:
    :partial:
      :declined_legal:
        :details: :legal_section_details

:legal_section_details:
  :object_class: Hash
  :allowed:
    :small_sections: :text_sections

:page_config:
  :object_class: Hash
  :required:
    :components: :components
    :component_configs: :component_configs
  :allowed:
    :template: :file

:page_configs:
  :object_class: Hash
  :required_from_sister:
    -
      :sister_key: :page_templates
      :req_key: '%{sister_val}'
      :req_val: :page_config

# Keep progress steps or no?
:progress_config:
  :object_class: Hash

:rate:
  :required:
    :label: :text_section
    :value: :text_section
  :allowed:
    :highlight: :boolean

:scripts_hash:
  :object_class: Hash
  :required:
    :apply: :files
    :basic: :files

:shared_configs:
  :object_class: Hash
  :allowed:
    :sidebar: :sidebar_config
    :footer: :footer_config

:sidebar_config:
  :object_class: Hash
  :required:
    :elements: Array
    # TODO: :sidebar_elements

:styles:
  :object_class: Array
  :value_types:
    - :file

:text_body_config:
  :object_class: Hash
  :allowed_min: 1
  :allowed:
    :sections: :text_body_sections
    :partial: :file
    :title: :text_section
    :legal_notices: :legal_notices

:text_body_element:
  :object_class: Hash
  :required:
    :element_type: :text_body_element_type
  :allowed:
    :attrs: Hash
    :img_attrs: Hash
    :partial: :file
    :template: :text_template
    :text: :text_line
    :text_lines: :text_lines
    :url: :url
  :allowed_when:
    :element_type:
      :rates:
        :rates: Array # TODO: rate
      :terms:
        :terms: Hash # TODO: term
      :consents:
        :sections: :consents_sections

:text_body_elements:
  :object_class: Array
  :value_types:
    - :text_body_element

:text_body_element_type:
  :object_class: String
  :value_types:
    - String
    - Symbol
  :allowed:
    - address
    - avant_signature
    - body
    - icon
    - link
    - subtitle
    - title
    - rates
    - terms
    - avant_card_image

:text_body_section:
  :object_class: Hash
  :required_when:
    :partial:
      :'credit_card/cta':
        :button: :button
  :allowed:
    :elements: :text_body_elements
    :attrs: Hash
    :partial: :file

:text_body_sections:
  :object_class: Array
  :value_types:
    - :text_body_section

:text_line:
  :object_class: String

:text_lines:
  :object_class: Array
  :value_types:
    - :text_line

:text_sections:
  :object_class: Array
  :value_types:
    - :text_section

:text_section:
  :object_class: Hash
  :allowed_min: 1
  :allowed_max: 2
  :allowed:
    :attrs: Hash
    :template: :text_template
    :text: :text_line
    :text_lines: :text_lines
  :allowed_when:
    '@object_name':
      :label:
        :increment_counter: :boolean
        :sublabel: :text_section
        :bold: :boolean

:text_template:
  :object_class: Hash
  :required:
    :text: :text_line
    :data: :text_template_data

:text_template_data:
  :object_class: Hash
  :allowed_min: 1
  :allowed:
    :__any: :text_template_data_interpolation

:text_template_data_interpolation:
  :object_class: Hash
  :required:
    :link_type: :text_template_link_type_string
  :required_when:
    :link_type:
      :modal:
        :link_text: String
        :link_target: :file
      :url:
        :link_text: String
        :link_target: :url
      :tooltip:
        :link_content: String
  :allowed_when:
    :link_type:
      :tooltip:
        :link_icon: :icon_string
        :link_text: String

:text_template_link_type_string:
  :object_class: String
  :allowed:
  :validations:
    - modal
    - url
    - tooltip

:url:
  :object_class: String
  :validations:
    -
      :type: :regexp
      :parameters: '/^https?:\/\/([-_\w\d]*\.)*[\w]{2,3}(\/[-_\#!\w\d\.]*)*$/'

:version_config:
  :object_class: Hash
  :required:
    :apply: :apply_config
